<o-form class="form" editable-detail="yes" show-header="no">


  <o-row layout-align="space-between center" fxFlex="100" fxLayoutGap="10px">

    <o-text-input attr="name" read-only="no" fxFlex="100" label="{{ 'SEARCH_BAR' | oTranslate }}"
      appearance="outline"></o-text-input>


    <o-row class="btn-container">
      <button attr="filter" [oFilterBuilderQuery]="filterBuilder" type="RAISED" label="Search" class="btn-outline-light"
        matTooltip="{{ 'Search' | oTranslate }}" >
        <mat-icon class="material-icons">search</mat-icon>
      </button>
      <button attr="clear" [oFilterBuilderClear]="filterBuilder" type="RAISED" label="Clear" class="btn-outline-light"
        matTooltip="{{ 'Clear' | oTranslate }}" (click)="clearFilters()">
        <mat-icon class="material-icons">clear</mat-icon>
      </button>
    </o-row>

  </o-row>

  <div class="searchFilters">
    <o-combo appearance="outline" label="category"  id="category"
      null-selection="no" attr="category" service="categories" entity="category" keys="categoryid" value-column="codigo"
      columns="categoryid;name;codigo" searchable="true" visible-columns="codigo" multiple="yes" translate="yes">
    </o-combo>

    <o-combo appearance="outline" label="status" id="status" null-selection="no"
      attr="status" service="statuses" entity="status" keys="statusid" value-column="code" columns="statusid;name;code"
      searchable="true" visible-columns="code" multiple="yes" translate="yes"></o-combo>

    <o-combo #price appearance="outline" id="price" [static-data]="pricesArray"
      value-column="priceCode" columns="priceCode;priceText;attr_price"
      visible-columns="attr_price" null-selection="no" attr="price" translate="yes">
    </o-combo>
  </div>

  <o-filter-builder #filterBuilder attr="thefilter"
    filters="NAME:name;DESCRIPTION:name;CATEGORY:category;STATUS:status;PRICE:price" [target]="toysGrid"
    query-on-change="no" query-on-change-delay="500" [expression-builder]="createFilter"></o-filter-builder>
</o-form>


<o-column-collapsible title="{{ 'VIEW_MAP' | oTranslate }}" appearance="legacy" expanded="no" icon="location_on"
  class="collapsible">
  <location-map></location-map>
</o-column-collapsible>

<div>
  <o-grid #toysGrid attr="toysGrid" service="toys" entity="toyAvailable" keys="toyid" detail-form-route="toysDetail"
    columns="toyid;photo;name;price;latitude;longitude" pageable="yes" query-rows="20" page-size-options="20"
    refresh-button="no" quick-filter="no" pagination-controls="yes" show-page-size="yes" page-size-options="24;32;64"
    [cols]="cols" gutter-size="15" grid-item-height="1:1.5">

    <o-grid-item *ngFor="let data of toysGrid.dataArray" (onClick)="openDetail(data)">

      <div class="card">
        <img class="image-header" src="{{baseUrl}}/restapi/get-image?toyId={{data.toyid}}">

        <div class="card-body">
          <h4>{{ data.name }}</h4>
          <p class="price"><span>€</span> {{ data.price | number: '1.2-2' }}</p>
        </div>

      </div>

      <!-- <o-column layout-padding class="container-item">
        <img class="image" src="http://localhost:8080/restapi/get-image?toyId={{data.toyid}}" style="margin-top:8px">
        <h4>{{ data.name  }}</h4>
        <div class="phone">
          <span>€</span><span>{{ data.price | number: '1.2-2' }}</span>
        </div>

      </o-column> -->

      <!-- <div class="toy-card">



        <img src="http://localhost:8080/restapi/get-image?toyId={{data.toyid}}" alt="" class="img-toy">

        <div class="card-footer">
          <h4 class="toy-title">{{ data.name }}</h4>
          <p><span>€</span> {{ data.price | number: '1.2-2' }}</p>
        </div>
         -->

      <!-- <div fxLayout="row" fxLayoutGap=".5em">
          <div fxLayout="column" fxLayoutAlign="start center">
            <mat-icon>credit_card</mat-icon>
            <mat-icon *ngIf="data.location != null">connect_without_contact</mat-icon>
          </div>
          <div fxLayout="column" fxLayoutAlign="start start">
            <span>{{ data.price }} €</span>
            <span *ngIf="data.location != null">{{data.location}} Km</span>
          </div>
        </div> -->

      <!-- </div> -->

    </o-grid-item>

  </o-grid>
</div>