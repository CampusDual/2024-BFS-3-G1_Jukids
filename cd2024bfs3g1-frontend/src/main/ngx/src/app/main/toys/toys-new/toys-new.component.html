<o-form id="newtoy" #NewToy attr="toysNew" service="{{ toyService }}" entity="toy" keys="toyid" show-header="no"
    show-header-navigation="no" undo-button="no" header-actions="I" (onInsert)="insertRedirect()">
    <div fxLayout="column" fxLayoutGap="8px" fxLayout.gt-sm="row">
        <div fxFlex.gt-sm="35%">
            <o-image id="toy_photo" title="{{ 'MAX_SIZE'  | oTranslate }}" attr="photo"
                empty-image="assets/images/no-image.png" max-file-size="4194304" sql-type="OTHER"
                required="yes" accept=".jpg,.jpeg,.png"></o-image>
        </div>
        <o-column fxFlex title="TOY_INFORMATION">
            <div fxLayout="column" fxLayoutGap="8px" layout-padding>
                <o-text-input fxFlex="40" attr="name" required="yes" max-length="150"></o-text-input>
                <o-textarea-input attr="description" required="yes" max-length="700"></o-textarea-input>
                <div fxLayout="column" fxLayoutGap="8px" fxLayout.gt-sm="row">
                    <o-currency-input fxFlex.gt-sm="50" attr="price" label="price" enabled="yes" min-decimal-digits="2"
                        max-decimal-digits="2" min="0.00" max="9999999" required="yes"></o-currency-input>
                    <o-email-input id="usr_email" #usr_email fxFlex.gt-sm="50" attr="email" required="yes"
                        label="usr_email"></o-email-input>
                </div>

                <div fxLayoutGap="8px" class="target">
                    <o-combo fxFlex.gt-sm="50" label="category" id="category" null-selection="no" attr="category"
                        service="categories" entity="category" keys="categoryid" value-column="codigo"
                        columns="categoryid;name;codigo" searchable="true" visible-columns="codigo" translate="yes"
                        required="yes"></o-combo>
                    <o-combo fxFlex.gt-sm="50" label="status" id="status" null-selection="no" attr="status"
                        service="statuses" entity="status" keys="statusid" value-column="code"
                        columns="statusid;name;code" searchable="true" visible-columns="code" translate="yes"
                        required="yes"></o-combo>
                </div>
                <o-checkbox *ngIf="toyService == 'toyowner';else encourageRegister" id="shipping" #shipping fxFlex="50"
                    attr="shipping" label="{{ 'SHIPPING'  | oTranslate }}">
                </o-checkbox>

                <ng-template #encourageRegister>
                    <div class="warning">
                        <span>{{ 'INICIA SESIÓN' | oTranslate }}</span>
                        <!--<a href="/login">¡Registrate!</a>-->
                        <button class="button btn-outline-light" type="button" (click)="modal('login')">
                            {{ 'LOGIN' | oTranslate}}
                        </button>
                    </div>
                </ng-template>

            </div>

            <div class="map-container" [ngClass]="{'not-selected': !isMapLatLongSelected }">
                <div class="pop-up-span">
                    <span>{{ 'SELECT_POINT_ON_MAP' | oTranslate }}</span>
                    <mat-icon class="mat-icon-error" *ngIf="!isMapLatLongSelected">error</mat-icon>
                    <mat-icon class="mat-icon-done" *ngIf="locationSelected">done</mat-icon>
                </div>
                <location-map (click)="handleMapClick($event)"></location-map>
            </div>


            <o-real-input style="display: none" id="longitude" #longitude fxFlex="50" attr="longitude"
                decimal-separator="," max-decimal-digits="10" min-decimal-digits="0" required="yes">
            </o-real-input>

            <o-real-input style="display: none" id="longitude" #longitude fxFlex="50" attr="longitude"
                decimal-separator="," max-decimal-digits="10" min-decimal-digits="0" required="yes">
            </o-real-input>
            <o-real-input style="display: none" id="latitude" #latitude fxFlex="50" attr="latitude"
                decimal-separator="," max-decimal-digits="10" min-decimal-digits="0" required="yes">
            </o-real-input>

            <o-row layout-align="end center" layout-margin-top>
                <button class="button btn-outline-light" (click)="cancel()">
                    <span>{{ 'cancel' | oTranslate }}</span>
                </button>
                <button attr="submit" (click)="newSubmit()" class="button btn-outline-light">
                    <!-- <mat-icon class="btn-icon">save</mat-icon> -->
                    <span>{{ 'PUBLICAR' | oTranslate }}</span>
                </button>
            </o-row>
        </o-column>
    </div>
</o-form>

